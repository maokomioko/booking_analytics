= content_for(:page_js){ javascript_include_tag 'pages/edit_user', 'data-turbolinks-track' => true }
= content_for(:page_css){ stylesheet_link_tag 'pages/edit_user', 'data-turbolinks-track' => true }

= content_for :main_content_header do
  .page-header
    %h1= t('.header')

- if devise_mapping.confirmable? && resource.pending_reconfirmation?
  .alert.alert-block.alert-info.fade.in
    %button.close{"data-dismiss" => "alert", :type => "button"} Ã—
    %h4.alert-heading
      = icon('info-circle')
      = t('flash.info')
    %p= t('devise.waiting_confirmation', user: resource.unconfirmed_email)

= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, multipart: true }) do |f|
  .row
    .col-md-12
      %h3= t('.account_info')
      %hr
    .col-md-6
      .form-group
        = f.label :email, class: 'control-label'
        = f.email_field :email, class: 'form-control'
      .form-group
        = f.label :password, class: 'control-label'
        = f.password_field :password, class: 'form-control'
        %span.help-block
          = icon('info-circle')
          = t('.password_tip')
      .form-group
        = f.label :password_confirmation, class: 'control-label'
        = f.password_field :password_confirmation, class: 'form-control'
      .form-group
        = f.button class: 'btn btn-bricky pull-right' do
          = t('shared.submit')
          = icon('arrow-circle-right')
    .col-md-6
      .form-group
        %label= t('.my_avatar')
        .fileupload.fileupload-new{"data-provides" => "fileupload"}
          .fileupload-new.thumbnail{:style => "width: 150px; height: 150px;"}
            - if current_user.avatar.url.present?
              = image_tag(current_user.avatar.big.url)
          .fileupload-preview.fileupload-exists.thumbnail{:style => "max-width: 150px; max-height: 150px; line-height: 20px;"}
          .user-edit-image-buttons
            %span.btn.btn-light-grey.btn-file
              %span.fileupload-new
                = icon('picture')
                = t('shared.select_image')
              %span.fileupload-exists
                = icon('picture')
                = t('shared.change')
              = f.file_field :avatar
              = f.hidden_field :avatar_cache
            %a.btn.fileupload-exists.btn-light-grey{"data-dismiss" => "fileupload", href: '#'}
              = icon('times')
              = t('shared.remove')
      - if current_user.avatar.url.present?
        .checkbox
          = label_tag do
            = f.check_box :remove_avatar, class: 'grey'
            = t('.remove_avatar')
