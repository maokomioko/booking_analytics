= content_for(:main_content_header) do
  .row
    .col-sm-12
      .page-header
        %h1= t('.header')

.row
  .col-sm-12
    %table.table
      %thead
        %tr
          %th= t('.thead.reservation_period')
          %th= t('.thead.price')
          %th= t('.thead.room')
          %th= t('.thead.occupancy')
          %th= t('.thead.contacts')
          - if defined?(Overbooking::Engine)
            %th
      %tbody
        - @reservations.each do |reservation|
          %tr
            %td
              = l reservation[:arrival], format: :short
              &mdash;
              = l reservation[:departure], format: :short
            %td= humanized_money_with_symbol reservation[:price]
            %td
              = Room.where(@channel_manager.connector_room_id_key => reservation[:room_ids]).map(&:name).to_sentence
              %small
                (
                = t('.total')
                = pluralize(reservation[:room_amount], t('.room'))
                )
            %td
              %p #{ t('.adults_count') } #{ reservation[:adults] }
              %p #{ t('.children_count') } #{ reservation[:children] }
            %td
              = [reservation[:contact_email], reservation[:contact_phone]].select(&:present?).to_sentence
            - if defined?(Overbooking::Engine)
              %td
                = link_to t('.show_available_hotels'), link_for_search_reservation(reservation), class: 'btn btn-teal'
